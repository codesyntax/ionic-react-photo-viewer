/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */
import { test as base } from '@playwright/test';
import { initPageEvents } from './page/event-spy';
import { getSnapshotSettings, goto as goToPage, setContent, setIonViewport, spyOnEvent, waitForChanges, } from './page/utils';
export const test = base.extend({
  page: async ({ page }, use, testInfo) => {
    const originalGoto = page.goto.bind(page);
    // Overridden Playwright methods
    page.goto = (url) => goToPage(page, url, testInfo, originalGoto);
    page.setContent = (html) => setContent(page, html);
    // Custom Ionic methods
    page.getSnapshotSettings = () => getSnapshotSettings(page, testInfo);
    page.setIonViewport = () => setIonViewport(page);
    page.waitForChanges = (timeoutMs) => waitForChanges(page, timeoutMs);
    page.spyOnEvent = (eventName) => spyOnEvent(page, eventName);
    // Custom event behavior
    await initPageEvents(page);
    await use(page);
  },
});
